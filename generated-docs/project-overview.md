Last updated: 2025-11-10

# Project Overview

## プロジェクト概要
- Obsidianのノートを整理しやすくするプラグインです。
- 見出しやリストの階層をまとめて、再帰的に折りたたみ・展開できます。
- 大きなノートでの作業効率を向上させ、視点切り替えを容易にします。

## 技術スタック
- フロントエンド: Obsidianプラグイン開発に使用される主要なAPIとフレームワーク。
  - `obsidian`: ObsidianアプリケーションのAPI。プラグイン開発の基盤となり、Obsidianの機能にアクセスするために使用されます。
- 音楽・オーディオ: このプロジェクトでは音楽・オーディオ関連の技術は使用していません。
- 開発ツール: コードの品質維持、開発効率向上、型安全性確保のためのツール群。
  - `@types/node`: Node.js環境の型定義ファイル。TypeScriptでNode.jsの機能を使用する際に型情報を提供します。
  - `@typescript-eslint/eslint-plugin`: ESLintがTypeScriptコードを解析するためのプラグイン。
  - `@typescript-eslint/parser`: TypeScriptコードをESLintで解析するためのパーサー。
  - `eslint`: JavaScript/TypeScriptのコード品質を静的に分析し、問題のあるパターンやスタイル違反を検出するリンター。
  - `typescript`: Microsoftが開発したJavaScriptのスーパーセット。静的型付けと最新のECMAScript機能を提供し、大規模なアプリケーション開発を支援します。
  - `tslib`: TypeScriptが出力するコードで使われるヘルパー関数群。ランタイムでの互換性を保ちます。
- テスト: このプロジェクトでは明示的なテスト関連技術は使用していません。
- ビルドツール: ソースコードを配布可能な形式に変換するためのツール。
  - `esbuild`: 非常に高速なJavaScript/TypeScriptのバンドラーおよびミニファイア。プラグインのビルドプロセスに使用されます。
  - `builtin-modules`: Node.jsの組み込みモジュール名のリストを提供します。
- 言語機能:
  - `TypeScript`: 静的型付けを導入することで、開発段階でのエラー検出を強化し、コードの保守性と品質を向上させます。
- 自動化・CI/CD: 開発プロセスの一部を自動化し、継続的な統合・デプロイをサポートする技術。
  - `version-bump.mjs`: プロジェクトのバージョン番号を自動的に更新するためのカスタムスクリプト。
- 開発標準: コードの一貫性を保ち、チーム開発を円滑にするためのルールとツール。
  - `.editorconfig`: 異なるエディタやIDE間でコーディングスタイル（インデント、改行コードなど）の一貫性を強制するための設定ファイル。
  - `.eslintrc`: ESLintの設定ファイルで、プロジェクトのコーディングスタイルと品質に関するルールを定義します。

## ファイル階層ツリー
```
📄 .editorconfig
📄 .eslintignore
📄 .eslintrc
📄 .gitignore
📄 .npmrc
📄 LICENSE
📖 README.md
📄 esbuild.config.mjs
📁 generated-docs/
📘 main.ts
📊 manifest.json
📊 package-lock.json
📊 package.json
🎨 styles.css
📊 tsconfig.json
📄 version-bump.mjs
📊 versions.json
```

## ファイル詳細説明
-   **`.editorconfig`**: 異なるエディタやIDEを使用する開発者が、プロジェクト全体で一貫したコーディングスタイル（インデントのサイズや種類、改行コードなど）を維持するための設定ファイルです。
-   **`.eslintignore`**: コード品質チェックツールであるESLintが、特定のファイルやディレクトリを無視して分析しないように指定するファイルです。
-   **`.eslintrc`**: ESLintのルールと設定を定義するファイルで、プロジェクトのJavaScript/TypeScriptコードが特定のコーディング規約やスタイルガイドに準拠しているかをチェックします。
-   **`.gitignore`**: Gitバージョン管理システムが追跡しないファイルやディレクトリ（例: ビルド成果物、ログファイル、一時ファイルなど）を指定するファイルです。
-   **`.npmrc`**: npm (Node Package Manager) の設定ファイルで、パッケージのインストール方法やレジストリの設定などをカスタマイズするために使用されます。
-   **`LICENSE`**: プロジェクトのライセンス情報を記載したファイルです。本プラグインの利用条件や再配布に関する権利と義務を定義します。
-   **`README.md`**: プロジェクトの概要、目的、インストール方法、主な機能、使用方法、そして開発に関する情報などを記述した、プロジェクトの顔となるドキュメントファイルです。
-   **`esbuild.config.mjs`**: 高速なJavaScriptバンドラーであるesbuildの設定を定義するJavaScriptモジュールファイルです。プラグインのビルドプロセスを構成します。
-   **`generated-docs/`**: 自動生成されたドキュメントや関連ファイルが格納されるディレクトリです。
-   **`main.ts`**: このObsidianプラグインの主要なロジックをTypeScriptで記述したファイルです。プラグインの初期化、コマンドの登録、設定の管理、そして再帰的な折りたたみ/展開機能の実装がここに含まれます。
-   **`manifest.json`**: Obsidianプラグインのメタデータを定義するJSONファイルです。プラグイン名、バージョン、開発者情報、最小限必要なObsidianのバージョンなどが記述されており、Obsidianがプラグインを認識しロードするために必須です。
-   **`package-lock.json`**: `package.json` に記述された依存関係に基づいて、プロジェクトが実際に使用するすべてのパッケージの正確なバージョンと依存ツリーを記録するファイルです。再現性のあるビルドを保証します。
-   **`package.json`**: Node.jsプロジェクトのメタデータファイルです。プロジェクト名、バージョン、説明、スクリプト、依存関係（インストールが必要なライブラリ）などが定義されています。
-   **`styles.css`**: プラグインがObsidianのUIに適用するカスタムCSSスタイルを定義するファイルです。プラグインの視覚的な要素や、折りたたみ機能に関連する表示を調整するために使用されます。
-   **`tsconfig.json`**: TypeScriptコンパイラの設定ファイルです。TypeScriptコードをJavaScriptにコンパイルする際のオプション（ターゲットECMAScriptバージョン、モジュール解決方法、出力ディレクトリなど）を定義します。
-   **`version-bump.mjs`**: プロジェクトのバージョン番号を更新するためのカスタムスクリプトです。通常、リリース準備の際に自動的にバージョンを更新するために使用されます。
-   **`versions.json`**: Obsidianプラグインの互換性情報を定義するファイルで、プラグインが対応するObsidianの最小バージョンを記録します。

## 関数詳細説明
-   **`onload (main.ts)`**
    -   役割: プラグインがObsidianによってロードされた際に実行される初期化関数です。プラグインのコマンド登録、設定のロード、イベントリスナーの設定など、プラグインが動作するために必要な初期設定を行います。
    -   引数: なし。
    -   戻り値: なし。
-   **`if (main.ts)`**
    -   役割: コード内で特定の条件が満たされた場合にのみ、特定のコードブロックを実行するための一般的な制御構造です。プラグインのロジックにおいて条件分岐を実装するために使用されます。
    -   引数: 内部で定義される条件式。
    -   戻り値: なし（条件に基づいて処理を実行するのみ）。
-   **`for (main.ts)`**
    -   役割: 特定のコードブロックを複数回繰り返すための一般的な制御構造です。リストの要素を順に処理したり、特定の回数だけ処理を実行したりする際に使用されます。
    -   引数: 内部で定義される反復処理の対象や回数。
    -   戻り値: なし（繰り返し処理を実行するのみ）。
-   **`onunload (main.ts)`**
    -   役割: プラグインがObsidianからアンロードされる直前に実行されるクリーンアップ関数です。登録したコマンドの解除、リソースの解放、イベントリスナーの削除など、プラグインが停止する際に必要な後処理を行います。
    -   引数: なし。
    -   戻り値: なし。
-   **`loadSettings (main.ts)`**
    -   役割: プラグインが保持する設定データをObsidianのデータストアから読み込むための関数です。これにより、ユーザーのカスタマイズがプラグインの再起動後も保持されます。
    -   引数: なし。
    -   戻り値: 設定オブジェクトを内部で更新するか、Promiseを返します。
-   **`saveSettings (main.ts)`**
    -   役割: プラグインの設定データをObsidianのデータストアに保存するための関数です。ユーザーが設定を変更した際に、その変更内容を永続化するために使用されます。
    -   引数: なし。
    -   戻り値: 設定変更を保存するか、Promiseを返します。

## 関数呼び出し階層ツリー
```
- if (main.ts)
  - onload (main.ts)
    - onunload ()
      - loadSettings ()
      - saveSettings ()
- for (main.ts)

---
Generated at: 2025-11-10 08:30:25 JST
